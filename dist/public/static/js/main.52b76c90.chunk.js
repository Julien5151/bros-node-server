(this["webpackJsonpbros-front"]=this["webpackJsonpbros-front"]||[]).push([[0],{67:function(e,r,t){},69:function(e,r,t){},80:function(e,r,t){},81:function(e,r,t){},82:function(e,r,t){"use strict";t.r(r);var n=t(0),a=t.n(n),c=t(8),o=t.n(c),s=(t(67),t(20)),i=t.n(s),u=t(26),l=t(32),j=t(111),b=t(115),f=t(117),d=t(116),p=t(118),h=(t(69),t.p+"static/media/logo.70f9324f.svg"),O=t(37),x=t(38),v=function(){function e(){Object(O.a)(this,e)}return Object(x.a)(e,null,[{key:"post",value:function(){var e=Object(u.a)(i.a.mark((function e(r,t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(this.BASE_URL+r,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 2:return n=e.sent,e.abrupt("return",this.handleResponse(n));case 4:case"end":return e.stop()}}),e,this)})));return function(r,t){return e.apply(this,arguments)}}()},{key:"handleResponse",value:function(){var e=Object(u.a)(i.a.mark((function e(r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.status>=400)){e.next=6;break}return e.next=3,r.json();case 3:throw e.sent;case 6:return e.next=8,r.json();case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()}]),e}();v.BASE_URL="https://bros-back-end.herokuapp.com";var g=t(11),m=t(6);function y(e){var r=Object(n.useState)({error:!1,errorText:null,value:null}),t=Object(l.a)(r,2),a=t[0],c=t[1],o=Object(n.useState)({error:!1,errorText:null,value:null}),s=Object(l.a)(o,2),O=s[0],x=s[1],y=Object(g.f)(),T=Object(n.useCallback)((function(e,r){e.target.value?r({error:!1,errorText:null,value:e.target.value}):r({error:!0,errorText:"Required",value:null})}),[]),k=Object(n.useCallback)(Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.post("/auth/signin",{email:a.value,password:O.value});case 3:y.push(A),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])}))),[a.value,O.value,y]);return Object(m.jsx)("div",{className:"login-component",children:Object(m.jsxs)(j.a,{children:[Object(m.jsxs)(b.a,{children:[Object(m.jsx)("div",{className:"logo-wrapper",children:Object(m.jsx)("img",{src:h,alt:"bros and beers logo"})}),Object(m.jsxs)("form",{autoComplete:"off",children:[Object(m.jsx)(f.a,{onChange:function(e){return T(e,c)},error:a.error,helperText:a.errorText,label:"Email",variant:"outlined"}),Object(m.jsx)(f.a,{onChange:function(e){return T(e,x)},type:"password",error:O.error,helperText:O.errorText,label:"Password",variant:"outlined"})]})]}),Object(m.jsx)(d.a,{children:Object(m.jsx)(p.a,{onClick:k,disabled:a.error||O.error,variant:"contained",color:"primary",children:"Sign-in"})})]})})}var T=t(46);t(80);function k(e){return Object(m.jsx)("div",{className:"profile-component",children:Object(m.jsx)(j.a,{children:Object(m.jsx)(b.a,{children:Object(m.jsx)("p",{children:"This is a profile"})})})})}var C=t(36),w=t(120),B=(t(81),function(){function e(){Object(O.a)(this,e)}return Object(x.a)(e,null,[{key:"arrayBufferToBase64",value:function(e){for(var r="",t=new Uint8Array(e),n=t.byteLength,a=0;a<n;a++)r+=String.fromCharCode(t[a]);return window.btoa(r)}},{key:"stringToUInt8ArrayBuffer",value:function(e){return Uint8Array.from(e,(function(e){return e.charCodeAt(0)}))}}]),e}());function S(e){var r=Object(n.useState)({error:!1,errorText:null,value:null}),t=Object(l.a)(r,2),a=t[0],c=t[1],o=Object(n.useState)(!1),s=Object(l.a)(o,2),h=s[0],O=s[1],x=Object(n.useCallback)((function(e,r){"clickaway"!==r&&O(!1)}),[]),g=Object(n.useCallback)((function(e,r){e.target.value?r({error:!1,errorText:null,value:e.target.value}):r({error:!0,errorText:"Required",value:null})}),[]),y=Object(n.useCallback)(Object(u.a)(i.a.mark((function e(){var r,t,n,c,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.post("/auth/register",{email:a.value});case 3:return r=e.sent,t=r.credentialCreationOptions,n=Object(C.a)(Object(C.a)({},t),{},{challenge:B.stringToUInt8ArrayBuffer(t.challenge),user:Object(C.a)(Object(C.a)({},t.user),{},{id:B.stringToUInt8ArrayBuffer(t.user.id)})}),e.next=8,navigator.credentials.create({publicKey:n});case 8:return c=e.sent,o={publicKeyCredential:{id:c.id,rawId:B.arrayBufferToBase64(c.rawId),response:{attestationObject:B.arrayBufferToBase64(c.response.attestationObject),clientDataJSON:B.arrayBufferToBase64(c.response.clientDataJSON)}}},e.next=12,v.post("/auth/signup",o);case 12:e.sent,O(!0),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),console.error(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])}))),[a.value]);return Object(m.jsxs)("div",{className:"register-component",children:[Object(m.jsxs)(j.a,{children:[Object(m.jsx)(b.a,{children:Object(m.jsx)("form",{autoComplete:"off",children:Object(m.jsx)(f.a,{onChange:function(e){return g(e,c)},error:a.error,helperText:a.errorText,label:"Email",variant:"outlined"})})}),Object(m.jsx)(d.a,{children:Object(m.jsx)(p.a,{onClick:y,disabled:a.error,variant:"contained",color:"primary",children:"Sign-up"})})]}),Object(m.jsx)(w.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:h,autoHideDuration:6e3,onClose:x,message:"Biometric data sent to Kim Jong-Un"})]})}var A="/profile";var U=function(){return Object(m.jsx)(T.a,{children:Object(m.jsxs)(g.c,{children:[Object(m.jsx)(g.a,{path:A,children:Object(m.jsx)(k,{})}),Object(m.jsx)(g.a,{path:"/register",children:Object(m.jsx)(S,{})}),Object(m.jsx)(g.a,{path:"/",children:Object(m.jsx)(y,{})})]})})},I=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,121)).then((function(r){var t=r.getCLS,n=r.getFID,a=r.getFCP,c=r.getLCP,o=r.getTTFB;t(e),n(e),a(e),c(e),o(e)}))};o.a.render(Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsx)(U,{})}),document.getElementById("root")),I()}},[[82,1,2]]]);
//# sourceMappingURL=main.52b76c90.chunk.js.map