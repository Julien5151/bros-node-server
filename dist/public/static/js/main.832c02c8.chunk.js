(this["webpackJsonpbros-front"]=this["webpackJsonpbros-front"]||[]).push([[0],{62:function(e,r,t){},64:function(e,r,t){},75:function(e,r,t){},76:function(e,r,t){},77:function(e,r,t){"use strict";t.r(r);var n=t(0),a=t.n(n),c=t(8),o=t.n(c),s=(t(62),t(17)),i=t.n(s),u=t(23),l=t(31),j=t(104),b=t(108),f=t(110),d=t(109),p=t(111),h=(t(64),t.p+"static/media/logo.70f9324f.svg"),O=t(33),x=t(34),v=function(){function e(){Object(O.a)(this,e)}return Object(x.a)(e,null,[{key:"post",value:function(){var e=Object(u.a)(i.a.mark((function e(r,t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(this.BASE_URL+r,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 2:return n=e.sent,e.abrupt("return",this.handleResponse(n));case 4:case"end":return e.stop()}}),e,this)})));return function(r,t){return e.apply(this,arguments)}}()},{key:"handleResponse",value:function(){var e=Object(u.a)(i.a.mark((function e(r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.status>=400)){e.next=6;break}return e.next=3,r.json();case 3:throw e.sent;case 6:return e.next=8,r.json();case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()}]),e}();v.BASE_URL="https://bros-back-end.herokuapp.com";var g=t(10),m=t(6);function y(e){var r=Object(n.useState)({error:!1,errorText:null,value:null}),t=Object(l.a)(r,2),a=t[0],c=t[1],o=Object(n.useState)({error:!1,errorText:null,value:null}),s=Object(l.a)(o,2),O=s[0],x=s[1],y=Object(g.f)(),T=Object(n.useCallback)((function(e,r){e.target.value?r({error:!1,errorText:null,value:e.target.value}):r({error:!0,errorText:"Required",value:null})}),[]),k=Object(n.useCallback)(Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.post("/auth/signin",{email:a.value,password:O.value});case 3:y.push(S),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])}))),[a.value,O.value,y]);return Object(m.jsx)("div",{className:"login-component",children:Object(m.jsxs)(j.a,{children:[Object(m.jsxs)(b.a,{children:[Object(m.jsx)("div",{className:"logo-wrapper",children:Object(m.jsx)("img",{src:h,alt:"bros and beers logo"})}),Object(m.jsxs)("form",{autoComplete:"off",children:[Object(m.jsx)(f.a,{onChange:function(e){return T(e,c)},error:a.error,helperText:a.errorText,label:"Email",variant:"outlined"}),Object(m.jsx)(f.a,{onChange:function(e){return T(e,x)},type:"password",error:O.error,helperText:O.errorText,label:"Password",variant:"outlined"})]})]}),Object(m.jsx)(d.a,{children:Object(m.jsx)(p.a,{onClick:k,disabled:a.error||O.error,variant:"contained",color:"primary",children:"Sign-in"})})]})})}var T=t(42);t(75);function k(e){return Object(m.jsx)("div",{className:"profile-component",children:Object(m.jsx)(j.a,{children:Object(m.jsx)(b.a,{children:Object(m.jsx)("p",{children:"This is a profile"})})})})}var w=t(32),C=(t(76),function(){function e(){Object(O.a)(this,e)}return Object(x.a)(e,null,[{key:"arrayBufferToBase64",value:function(e){for(var r="",t=new Uint8Array(e),n=t.byteLength,a=0;a<n;a++)r+=String.fromCharCode(t[a]);return window.btoa(r)}},{key:"stringToUInt8ArrayBuffer",value:function(e){return Uint8Array.from(e,(function(e){return e.charCodeAt(0)}))}}]),e}());function B(e){var r=Object(n.useState)({error:!1,errorText:null,value:null}),t=Object(l.a)(r,2),a=t[0],c=t[1],o=Object(n.useCallback)((function(e,r){e.target.value?r({error:!1,errorText:null,value:e.target.value}):r({error:!0,errorText:"Required",value:null})}),[]),s=Object(n.useCallback)(Object(u.a)(i.a.mark((function e(){var r,t,n,c,o,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.post("/auth/register",{email:a.value});case 3:return r=e.sent,t=r.credentialCreationOptions,n=Object(w.a)(Object(w.a)({},t),{},{challenge:C.stringToUInt8ArrayBuffer(t.challenge),user:Object(w.a)(Object(w.a)({},t.user),{},{id:C.stringToUInt8ArrayBuffer(t.user.id)})}),e.next=8,navigator.credentials.create({publicKey:n});case 8:return c=e.sent,o={publicKeyCredential:{id:c.id,rawId:C.arrayBufferToBase64(c.rawId),response:{attestationObject:C.arrayBufferToBase64(c.response.attestationObject),clientDataJSON:C.arrayBufferToBase64(c.response.clientDataJSON)}}},e.next=12,v.post("/auth/signup",o);case 12:s=e.sent,console.log(s),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),console.error(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])}))),[a.value]);return Object(m.jsx)("div",{className:"register-component",children:Object(m.jsxs)(j.a,{children:[Object(m.jsx)(b.a,{children:Object(m.jsx)("form",{autoComplete:"off",children:Object(m.jsx)(f.a,{onChange:function(e){return o(e,c)},error:a.error,helperText:a.errorText,label:"Email",variant:"outlined"})})}),Object(m.jsx)(d.a,{children:Object(m.jsx)(p.a,{onClick:s,disabled:a.error,variant:"contained",color:"primary",children:"Sign-up"})})]})})}var S="/profile";var A=function(){return Object(m.jsx)(T.a,{children:Object(m.jsxs)(g.c,{children:[Object(m.jsx)(g.a,{path:S,children:Object(m.jsx)(k,{})}),Object(m.jsx)(g.a,{path:"/register",children:Object(m.jsx)(B,{})}),Object(m.jsx)(g.a,{path:"/",children:Object(m.jsx)(y,{})})]})})},I=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,113)).then((function(r){var t=r.getCLS,n=r.getFID,a=r.getFCP,c=r.getLCP,o=r.getTTFB;t(e),n(e),a(e),c(e),o(e)}))};o.a.render(Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsx)(A,{})}),document.getElementById("root")),I()}},[[77,1,2]]]);
//# sourceMappingURL=main.832c02c8.chunk.js.map